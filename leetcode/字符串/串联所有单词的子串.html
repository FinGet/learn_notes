<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
</head>
<body>
	<script type="text/javascript">

		let s = "aaaaaaaa",words = ["aa","aa","aa"]
		var findSubstring = function(str, words) {
    	// 保存结果
		  let result = []
		  // 记录数组的长度，做边界条件计算
		  let num = words.length
		  // 递归函数体
		  let range = (r, _arr) => {
		    if (r.length === num) {
		      result.push(r)
		    } else {
		      _arr.forEach((item, idx) => {
		        let tmp = [].concat(_arr)
		        tmp.splice(idx, 1)
		        range(r.concat(item), tmp)
		      })
		    }
		  }
		  range([], words)
		  let r = []
		  console.log('result:'+result)
		  // let i = 0,len = result[0].length
		  // let index = (str,result) => {
	   //    if (result.length == 0) {
	   //        return
	   //    }

	   //    let _i = str.indexOf(result[0].join(''));
	   //    r.push(_i);
	      
	   //    str.substr(result[0].length);
	   //    result.splice(0,1);
	   //    index(str,result)
		  // }
		  // index(str,result)

		  // var positions = new Array();
			function searchSubStr(str,result){
					if (result.length == 0) {
		          return
		      }
			    let pos = str.indexOf(result[0].join(''));
			    let i = new Set(result[0].join('')).size>1?result[0].length : 1
			    while(pos>-1){
			        r.push(pos); 
			        pos = str.indexOf(result[0].join(''),pos+i);
			    }
			    result.splice(0,1);
			    searchSubStr(str,result);
			}
		  searchSubStr(str,result);
		  return Array.from(new Set(r))
		  // let r = []
		  // result.forEach(item => {
		  // 	let i = str.indexOf(item.join(''));
		  // 	let l = str.lastIndexOf(item.join(''))
		  // 	r.push(i,l)
		  // })
		  // return Array.from(new Set(r.filter(item => item !== -1)))

		  // [0, 9, -1] filter 之后[0,9]
		  // return result.map(item => {
		  //   return str.indexOf(item.join(''))
		  // }).filter(item => item !== -1).sort()
		};
		console.log(findSubstring(s,words))
	</script>
</body>
</html>