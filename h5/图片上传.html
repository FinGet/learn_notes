<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title></title>
  <style media="screen">
  #div {
    width: 400px;
    height: 300px;
    background: #CCC;
    border: 1px solid black;
    text-align: center;
    line-height: 300px;
  }
  </style>
  <script>
  window.onload = function() {
    let oDiv = document.getElementById('div');
    let oImg = document.getElementById('img');
    let oText = document.getElementById('textarea');

    oDiv.addEventListener('dragenter', function() {
      oDiv.innerHTML = '请松手';
    }, false);
    oDiv.addEventListener('dragleave', function() {
      oDiv.innerHTML = '拖到这里上传';
    }, false);

    oDiv.addEventListener('dragover', function(ev) {
      ev.preventDefault();
    }, false);
    oDiv.addEventListener('drop', function(ev) {
      ev.preventDefault();
      //
      let oFile = ev.dataTransfer.files[0];
      console.log(oFile)
      //读取
      let reader = new FileReader();
      // console.log()
      reader.readAsText(oFile, 'utf-8')
      // reader.readAsDataURL(oFile);
      reader.onload = function(e) {
        //alert('成功');
        var fileText = e.target.result.split("\n");
        console.log(fileText)
        // oImg.src = this.result;
        // oText.value = this.result;
      };
      reader.onerror = function() {
        alert('读取失败了');
      };
      console.log(reader);
    }, false);
  }
  </script>
</head>

<body>
  <div id="div">拖到这里上传</div>
  <img src="" id="img">
  <textarea name="" id="textarea" cols="30" rows="10"></textarea>
</body>

</html>